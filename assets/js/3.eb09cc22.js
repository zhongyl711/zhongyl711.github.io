(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{383:function(t,a,s){t.exports=s.p+"assets/img/router2.8be14aa4.jpg"},384:function(t,a,s){t.exports=s.p+"assets/img/router3.0cf2739d.jpg"},385:function(t,a,s){t.exports=s.p+"assets/img/router1.1cb08a54.jpg"},422:function(t,a,s){"use strict";s.r(a);var r=s(51),e=Object(r.a)({},(function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[r("h1",{attrs:{id:"路由"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#路由"}},[t._v("#")]),t._v(" 路由")]),t._v(" "),r("p",[t._v("路由功能使用"),r("a",{attrs:{href:"https://router.vuejs.org/zh/",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-router"),r("OutboundLink")],1),t._v("进行封装管理")]),t._v(" "),r("p",[t._v("文件地址：ynet 平台项目 ynet-core/src/core/router.ts")]),t._v(" "),r("h2",{attrs:{id:"api"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#api"}},[t._v("#")]),t._v(" API")]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("属性")]),t._v(" "),r("th",[t._v("值")]),t._v(" "),r("th",[t._v("说明")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("routerDir")]),t._v(" "),r("td",[t._v("prev | next")]),t._v(" "),r("td",[t._v("根据此值确定路由方向")])])])]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("方法")]),t._v(" "),r("th",[t._v("参数")]),t._v(" "),r("th",[t._v("返回值")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("push")]),t._v(" "),r("td",[t._v("参考"),r("a",{attrs:{href:"https://router.vuejs.org/zh/guide/essentials/navigation.html#router-push-location-oncomplete-onabort",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-router push"),r("OutboundLink")],1),t._v("方法")]),t._v(" "),r("td",[t._v("Promise")])]),t._v(" "),r("tr",[r("td",[t._v("replace")]),t._v(" "),r("td",[t._v("参考"),r("a",{attrs:{href:"https://router.vuejs.org/zh/guide/essentials/navigation.html#router-replace-location-oncomplete-onabort",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-router replace"),r("OutboundLink")],1),t._v("方法")]),t._v(" "),r("td",[t._v("Promise")])]),t._v(" "),r("tr",[r("td",[t._v("back")]),t._v(" "),r("td",[t._v("无")]),t._v(" "),r("td",[t._v("无")])])])]),t._v(" "),r("table",[r("thead",[r("tr",[r("th",[t._v("配置项")]),t._v(" "),r("th",[t._v("参数")])])]),t._v(" "),r("tbody",[r("tr",[r("td",[t._v("onBefore")]),t._v(" "),r("td",[t._v("to, from, next（参照"),r("a",{attrs:{href:"https://router.vuejs.org/zh/api/#router-beforeeach",target:"_blank",rel:"noopener noreferrer"}},[t._v("vue-router beforeEach"),r("OutboundLink")],1),t._v("方法）")])]),t._v(" "),r("tr",[r("td",[t._v("onAfter")]),t._v(" "),r("td",[t._v("无，（参照"),r("a",{attrs:{href:"https://router.vuejs.org/zh/api/#router-aftereach",target:"_blank",rel:"noopener noreferrer"}},[t._v(" router.afterEach"),r("OutboundLink")],1),t._v("方法）")])]),t._v(" "),r("tr",[r("td",[t._v("onExit")]),t._v(" "),r("td",[t._v("无，触发情况查看下方示例")])]),t._v(" "),r("tr",[r("td",[t._v("disableRouterParamSession")]),t._v(" "),r("td",[t._v("禁用路由跳转时 param 存放 session，默认启用")])])])]),t._v(" "),r("h3",{attrs:{id:"onexit触发示例"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#onexit触发示例"}},[t._v("#")]),t._v(" onExit触发示例")]),t._v(" "),r("div",{staticClass:"language-typescript extra-class"},[r("pre",{pre:!0,attrs:{class:"language-typescript"}},[r("code",[r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// 当前hash和首次进入hash对比是否一致或者是否是入口地址hash")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// this.app.param.indexPath 初始化应用实例时传入的参数")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//window.app = new Application({")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//    el: "#app",')]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    routerOption: routerOption,")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//    layout: DefaultLayout,")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v('//    indexPath: "/index/index"')]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token comment"}},[t._v("//});")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("param"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("indexPath "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hash "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("app"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("param"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("indexPath"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("hash "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("===")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstPath "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("||")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("!")]),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("firstPath\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("option"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("onExit "),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v("&&")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("option"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("onExit")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n  "),r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("return")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),r("p",[t._v("使用方式：")]),t._v(" "),r("p",[t._v("1.构建路由配置项信息,如图所示")]),t._v(" "),r("p",[r("img",{attrs:{src:s(383),alt:""}})]),t._v(" "),r("p",[t._v("2.构建应用实例中挂载路由配置项，如图所示")]),t._v(" "),r("p",[r("img",{attrs:{src:s(384),alt:""}})]),t._v(" "),r("p",[t._v("在视图文件中使用 this.$app.router 操作 push，replace 及 back 方法，如图所示")]),t._v(" "),r("p",[r("img",{attrs:{src:s(385),alt:""}})]),t._v(" "),r("p",[t._v("不在视图文件中")]),t._v(" "),r("p",[t._v("使用 app.router 操作 push，replace 及 back 方法")]),t._v(" "),r("h3",{attrs:{id:"disablerouterparamsession"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#disablerouterparamsession"}},[t._v("#")]),t._v(" disableRouterParamSession")]),t._v(" "),r("p",[t._v("禁用路由跳转时 param 存放 session，默认启用")]),t._v(" "),r("p",[t._v("部分场景下在跨页面传值时，需要传递对象，并且不想把参数对外保护在 url 时，可以使用 params 方式进行传递")]),t._v(" "),r("p",[t._v("但是在使用 params 传递时，当页面刷新或者路由返回时，params 会丢失，造成页面数据无法展示，为了解决该问题，我们在平台默认提供了路由参数会话缓存存放的方案来解决该问题")]),t._v(" "),r("p",[t._v("默认所有的路由跳转通过 params 传值时，都会存放在会话缓存中，如果想禁用可以设置该参数为"),r("strong",[t._v("true")])]),t._v(" "),r("h2",{attrs:{id:"使用方式"}},[r("a",{staticClass:"header-anchor",attrs:{href:"#使用方式"}},[t._v("#")]),t._v(" 使用方式")]),t._v(" "),r("ol",[r("li",[r("p",[t._v("传值时和 vue-router 使用方式一样")]),t._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$app"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("router"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("push")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" name"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx"')]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" params"),r("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])]),t._v(" "),r("li",[r("p",[t._v("在取值时我们提供了两种方式")]),t._v(" "),r("p",[t._v("1> 我们仍然保留了 vue-router 原始的取值方式，但是该方式去值会存在刷新页面/返回时参数丢失问题")]),t._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("$rout"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("params"),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])]),r("p",[t._v("2> 我们提供了 getRouterParam 方法来进行参数取值，如果 params 有值则直接返回 route.params，如果没有则取会话缓存数据")]),t._v(" "),r("div",{staticClass:"language-js extra-class"},[r("pre",{pre:!0,attrs:{class:"language-js"}},[r("code",[r("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("this")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),r("span",{pre:!0,attrs:{class:"token function"}},[t._v("getRouterParam")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),r("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(";")]),t._v("\n")])])])])]),t._v(" "),r("blockquote",[r("p",[t._v("提示，我们内部对其进行了深度优化，当页面销毁时，我们会判断路由方向，只有在返回时，我们才会对该页面的参数缓存进行清除，正序操作为保证返回的业务路径完整性，不会清除会话缓存，所以对于页面中的 params 会话缓存的清空无需过度关心")])]),t._v(" "),r("blockquote",[r("p",[t._v("针对上述逻辑，如果在返回页面时，跨级跳转跳过的中间页面所产生的会话数据不会被清除，如果想清楚可以使用 app.router.removeRouterParamFromSession 方法主动清除")])])])}),[],!1,null,null,null);a.default=e.exports}}]);